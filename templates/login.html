<!doctype html>
<html lang="en" x-data="{ loading: false, showEmail: false, email: '', emailSending: false }">
<head>
  <meta charset="UTF-8">
  <title>Sign In</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Tailwind via CDN for quick nice styling -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- AlpineJS (your app can include a global one; this is just to make it standalone) -->
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body class="min-h-screen bg-slate-100 flex items-center justify-center">
  <div class="w-full max-w-md mx-4">
    <div class="bg-white rounded-2xl shadow-xl p-8">
      <div class="flex justify-center mb-6">
        <div class="h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center">
          <span class="text-2xl">&#128274;</span>
        </div>
      </div>

      <h1 class="text-2xl font-semibold text-center text-slate-800 mb-2">
        Welcome back
      </h1>
      <p class="text-center text-slate-500 mb-8">
        Sign in to continue to your account.
      </p>

      <!-- Google Sign In Button -->
      <a
        href="/auth/google/login"
        @click="loading = true"
        class="w-full inline-flex items-center justify-center gap-3 border border-slate-300 rounded-xl px-4 py-3 text-slate-800 font-medium hover:bg-slate-50 transition disabled:opacity-70 mb-4"
        :class="{ 'cursor-wait': loading }"
      >
        <svg class="h-5 w-5" viewBox="0 0 533.5 544.3" xmlns="http://www.w3.org/2000/svg">
          <path fill="#4285f4" d="M533.5 278.4c0-18.3-1.5-36-4.3-53.1H272.1v100.6h147c-6.3 34.4-25 63.5-53.5 83.1l86.4 67c50.4-46.5 81.5-115 81.5-197.6z"/>
          <path fill="#34a853" d="M272.1 544.3c72.9 0 134.1-24.1 178.8-65.3l-86.4-67c-24.1 16.2-55 25.8-92.4 25.8-70.9 0-131-47.9-152.5-112.1l-89.1 69.2c43.6 86.5 133.1 149.4 241.6 149.4z"/>
          <path fill="#fbbc04" d="M119.6 325.7c-10.5-31.4-10.5-65.4 0-96.8l-89.1-69.2c-39.2 77.9-39.2 168 0 245.9l89.1-69.9z"/>
          <path fill="#ea4335" d="M272.1 107.7c39.6-.6 77.7 14.8 106.6 42.9l79.4-79.4C414.7 24.5 345.8-1 272.1 0 163.6 0 74.1 62.9 30.5 149.7l89.1 69.2C141.1 155.6 201.2 107.7 272.1 107.7z"/>
        </svg>
        <span x-show="!loading">Continue with Google</span>
        <span x-show="loading" class="flex items-center gap-2">
          <span>Redirecting...</span>
          <span class="w-3 h-3 rounded-full border-2 border-slate-400 border-t-transparent animate-spin"></span>
        </span>
      </a>

      <div class="relative my-6">
        <div class="absolute inset-0 flex items-center">
          <div class="w-full border-t border-slate-200"></div>
        </div>
        <div class="relative flex justify-center text-sm">
          <span class="px-4 bg-white text-slate-500">or</span>
        </div>
      </div>

      <!-- Email Sign In -->
      <div x-show="!showEmail">
        <button
          @click="showEmail = true"
          type="button"
          class="w-full inline-flex items-center justify-center gap-3 border border-slate-300 rounded-xl px-4 py-3 text-slate-800 font-medium hover:bg-slate-50 transition"
        >
          <svg class="h-5 w-5 text-slate-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
          </svg>
          Continue with Email
        </button>
      </div>

      <!-- Email Form (shown when showEmail is true) -->
      <form
        x-show="showEmail"
        x-transition
        method="POST"
        action="/auth/email/start"
        @submit="emailSending = true"
        class="space-y-4"
      >
        <div>
          <label for="email" class="block text-sm font-medium text-slate-700 mb-1">
            Email address
          </label>
          <input
            type="email"
            id="email"
            name="email"
            x-model="email"
            required
            placeholder="you@example.com"
            class="w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"
            :disabled="emailSending"
          >
        </div>
        <button
          type="submit"
          :disabled="emailSending || !email"
          class="w-full inline-flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 rounded-xl px-4 py-3 text-white font-medium transition disabled:opacity-50 disabled:cursor-not-allowed"
        >
          <span x-show="!emailSending">Send Sign In Link</span>
          <span x-show="emailSending" class="flex items-center gap-2">
            <span>Sending...</span>
            <span class="w-4 h-4 rounded-full border-2 border-white border-t-transparent animate-spin"></span>
          </span>
        </button>
        <button
          type="button"
          @click="showEmail = false; email = ''"
          class="w-full text-sm text-slate-500 hover:text-slate-700 transition"
          :disabled="emailSending"
        >
          Back to other options
        </button>
      </form>

      <p class="mt-6 text-xs text-center text-slate-400">
        By continuing, you agree to our terms of service and privacy policy.
      </p>
    </div>
  </div>
</body>
</html>
